---
description: 規劃模式 - 詳細任務規劃和訪談流程（類似 Prometheus）
---

# 規劃模式工作流程

適用於複雜或關鍵任務，需要詳細規劃和用戶確認。

## 步驟 1：需求釐清

向用戶詢問關鍵問題：
- 具體想達成什麼目標？
- 有沒有特定的限制或偏好？
- 預期的輸出是什麼？
- 優先級和時間要求？

## 步驟 2：代碼調研

深入了解現有實現：
- 閱讀相關模組的代碼
- 識別現有的設計模式
- 找出可重用的組件
- 記錄潛在的問題點

## 步驟 3：建立實施計畫

建立詳細的 implementation_plan.md：

```markdown
# [任務名稱] 實施計畫

## 目標
[清楚描述要達成的目標]

## 現況分析
[現有代碼和架構的分析]

## 方案設計
### 方案 A：[方案名稱]
- 優點：...
- 缺點：...

### 方案 B：[方案名稱]
- 優點：...
- 缺點：...

## 建議方案
[推薦的方案及理由]

## 步驟清單
- [ ] 步驟 1
- [ ] 步驟 2
...

## 風險評估
[潛在問題和應對策略]

## 驗證計畫
[如何確認實作正確]
```

## 步驟 4：用戶審閱

使用 notify_user 請求用戶審閱：
- 提供 implementation_plan.md 路徑
- 詢問是否有問題或修改建議
- 等待用戶確認後再執行

## 步驟 5：執行實施

用戶確認後，按計畫執行：
- 切換到 EXECUTION 模式
- 逐步完成計畫中的步驟
- 持續更新 task.md 狀態

## 步驟 6：驗證和報告

完成後進行驗證：
- 按驗證計畫執行測試
- 建立 walkthrough.md 記錄結果
- 向用戶報告完成情況
